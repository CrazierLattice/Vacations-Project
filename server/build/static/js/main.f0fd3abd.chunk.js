(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{283:function(e,t,n){},468:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(0),o=n.n(r),c=n(18),i=n.n(c),s=(n(283),n(16)),l=n(15),u=n(23),d=n(26),j="LOG_IN",b="LOG_OUT",p="LOG_IN_MESSAGES",h="CLEAR_LOG_IN_MESSAGES",O="GET_VACATIONS",f="POST_VACATION_MESSAGE",v="DELETE_VACATION_MESSAGE",x="GET_FOLLOWED_VACATIONS",g="RESET_VACATIONS",m="EDIT_VACATION",y="REGISTER_USER",w="DELETE_REGISTER_USER_MESSAGE",k=n(507),S=n(510),C=n(12),E=n.n(C),_=n(22),N=function(){var e=Object(_.a)(E.a.mark((function e(t,n,a,r){var o,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});case 2:return o=e.sent,e.next=5,o.json();case 5:(c=e.sent).user?(r({type:j,payload:{user:c.user[0],token:c.token}}),localStorage.setItem("token",c.token),a.push("/vacations")):r({type:p,payload:c});case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),T=n(527),V=n(512),I=function(){var e=Object(u.g)(),t=Object(l.b)(),n=Object(r.useState)(""),o=Object(s.a)(n,2),c=o[0],i=o[1],j=Object(r.useState)(""),b=Object(s.a)(j,2),p=b[0],O=b[1],f=localStorage.getItem("token"),v=Object(l.c)((function(e){return e.loginMessage}));return Object(r.useEffect)((function(){t({type:h,payload:null}),f&&e.push("/vacations")}),[]),Object(a.jsxs)("div",{className:"d-flex flex-column login-container",children:[Object(a.jsx)("h2",{children:"Log in"}),Object(a.jsx)(k.a,{value:c,onChange:function(e){return i(e.target.value)},inputProps:{"aria-label":"description",placeholder:"Username"}}),Object(a.jsx)(k.a,{value:p,onChange:function(e){return O(e.target.value)},inputProps:{type:"password","aria-label":"description",placeholder:"Password"}}),Object(a.jsx)(S.a,{onClick:function(){N(c,p,e,t)},variant:"contained",color:"primary",children:"Log in"}),Object(a.jsx)(d.b,{to:"/register",children:Object(a.jsx)("p",{children:"Click here to register"})}),(null===v||void 0===v?void 0:v.error)&&Object(a.jsxs)(T.a,{severity:(null===v||void 0===v?void 0:v.error)&&"error",children:[Object(a.jsx)(V.a,{children:(null===v||void 0===v?void 0:v.error)&&"Error"}),null===v||void 0===v?void 0:v.message]})]})},P=function(){var e,t=Object(u.g)(),n=Object(r.useState)(""),o=Object(s.a)(n,2),c=o[0],i=o[1],j=Object(r.useState)(""),b=Object(s.a)(j,2),p=b[0],h=b[1],O=Object(r.useState)(""),f=Object(s.a)(O,2),v=f[0],x=f[1],g=Object(r.useState)(""),m=Object(s.a)(g,2),C=m[0],N=m[1],I=Object(l.c)((function(e){return e.user})).token,P=Object(l.b)(),L=function(){var e=Object(_.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:c,lastName:p,username:v,password:C})});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,P({type:y,payload:n});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){P({type:w,payload:null}),I&&t.push("/vacations")}),[]);var A=Object(l.c)((function(e){return e.register}));return Object(a.jsxs)("div",{className:"register",children:[Object(a.jsx)("h2",{children:"Registery Page"}),Object(a.jsx)(k.a,{value:c,onChange:function(e){return i(e.target.value)},inputProps:{"aria-label":"description",placeholder:"First Name"}}),Object(a.jsx)(k.a,{value:p,onChange:function(e){return h(e.target.value)},inputProps:{"aria-label":"description",placeholder:"Last Name"}}),Object(a.jsx)(k.a,{value:v,onChange:function(e){return x(e.target.value)},inputProps:{"aria-label":"description",placeholder:"Username"}}),Object(a.jsx)(k.a,{value:C,onChange:function(e){return N(e.target.value)},inputProps:{type:"password","aria-label":"description",placeholder:"Password"}}),Object(a.jsx)(S.a,{variant:"contained",color:"primary",onClick:L,children:"Register"}),Object(a.jsx)(d.b,{to:"/login",children:"Click here to login"}),(null===A||void 0===A||null===(e=A.message)||void 0===e?void 0:e.length)&&Object(a.jsxs)(T.a,{severity:(null===A||void 0===A?void 0:A.error)?"error":"success",children:[Object(a.jsx)(V.a,{children:(null===A||void 0===A?void 0:A.error)?"Error":"Success"}),null===A||void 0===A?void 0:A.message]})]})},L=function(){var e=Object(_.a)(E.a.mark((function e(t,n){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations/all",{headers:{authorization:n}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,console.log(r),t({type:O,payload:{vacations:r.vacations}}),e.abrupt("return",r.vacations);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(_.a)(E.a.mark((function e(t,n,a){var r,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations/followedvacations/".concat(t),{headers:{authorization:a}});case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(o=e.sent).error){e.next=8;break}return e.abrupt("return",console.log(o));case 8:n({type:x,payload:{followedVacations:o.followedVacations,unfollowedVacations:o.unfollowedVacations,likes:o.likesData}});case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),D=n(68),M=n(513),U=n(221),R=n.n(U),G=n(5),B=n(518),F=n(519),z=n(520),W=n(521),K=n(522),J=n(523),X=n(511),H=n(86),Y=n(120),q=n(153),Q=n.n(q),Z=n(222),$=n.n(Z),ee=function(){var e=Object(_.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(_.a)(E.a.mark((function e(a,r){var o,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:1000/vacations/put/".concat(t,"/").concat(n),{method:"PUT",headers:{authorization:localStorage.getItem("token")}});case 3:return o=e.sent,e.next=6,o.json();case 6:c=e.sent,a({err:null,data:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),r({err:e.t0.message,data:null});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),te=n(220),ne=n.n(te),ae=n(474),re=n(472),oe=n(236),ce=function(){var e=Object(_.a)(E.a.mark((function e(t,n){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations/delete/".concat(t),{method:"DELETE",headers:{authorization:n}});case 2:return a=e.sent,e.next=5,a.json();case 5:r=e.sent,console.log(r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=Object(M.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),se=function(e){var t=e.vacation,n=e.open,r=e.handleClose,o=e.update,c=e.setUpdate,i=e.token,s=ie();return Object(a.jsx)(ae.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:s.modal,open:n,onClose:r,closeAfterTransition:!0,BackdropComponent:re.a,BackdropProps:{timeout:500},children:Object(a.jsx)(oe.a,{in:n,children:Object(a.jsxs)("div",{className:s.paper,children:[Object(a.jsx)("h2",{id:"transition-modal-title",children:"WARNING"}),Object(a.jsxs)("p",{id:"transition-modal-description",children:["You are about to delete ",t.location," from the vacation's list."]}),Object(a.jsxs)("div",{className:"modal-btn-container",children:[Object(a.jsx)("button",{onClick:r,children:"CLOSE"}),Object(a.jsx)("button",{onClick:function(){ce(t.id,i),c(o+1)},children:"DELETE"})]})]})})})},le=n(514),ue=n(517),de=n(516),je=n(515),be=n(119),pe=n(525),he=n(526),Oe=n(470),fe=n(28),ve=n(524),xe=function(){var e=Object(_.a)(E.a.mark((function e(t,n,a,r,o,c,i,s,l){var u,d;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations/edit/".concat(n),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:a},body:JSON.stringify({description:r,location:o,starting_date:c,ending_date:i,price:s,image:l})});case 2:return u=e.sent,console.log(u),e.next=6,u.json();case 6:return(d=e.sent).error||t({type:m,payload:d}),e.abrupt("return",d);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r,o,c,i,s,l){return e.apply(this,arguments)}}(),ge=function(e){var t=e.vacation,n=e.token,o=e.update,c=e.setUpdate,i=e.open,u=e.handleClose,d=Object(l.b)(),j=Object(r.useState)(t.location),b=Object(s.a)(j,2),p=b[0],h=b[1],O=Object(r.useState)(t.description),f=Object(s.a)(O,2),v=f[0],x=f[1],g=Object(r.useState)(t.price),m=Object(s.a)(g,2),y=m[0],w=m[1],k=Object(r.useState)(t.starting_date),C=Object(s.a)(k,2),N=C[0],T=C[1],V=Object(r.useState)(t.ending_date),I=Object(s.a)(V,2),P=I[0],L=I[1],A=Object(r.useState)(t.image),D=Object(s.a)(A,2),M=D[0],U=D[1];return Object(a.jsx)("div",{children:Object(a.jsxs)(le.a,{open:i,onClose:u,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)(je.a,{id:"form-dialog-title",children:["Edit ",t.location]}),Object(a.jsx)(de.a,{children:Object(a.jsxs)(pe.a,{flexDirection:"column",display:"flex",children:[Object(a.jsx)(he.a,{value:p,onChange:function(e){return h(e.target.value)},label:"Location"}),Object(a.jsx)(Oe.a,{value:v,onChange:function(e){return x(e.target.value)},"aria-label":"minimum height",label:"Description",rowsMin:3,placeholder:"Vacation description.."}),Object(a.jsx)(he.a,{value:y,onChange:function(e){return w(e.target.value)},label:"Price"}),Object(a.jsxs)(fe.a,{utils:be.a,children:[Object(a.jsx)(ve.a,{disableToolbar:!0,variant:"inline",format:"yyyy/MM/dd",margin:"normal",label:"Starting date",value:N,onChange:function(e){return T(e)},KeyboardButtonProps:{"aria-label":"change date"}}),Object(a.jsx)(ve.a,{disableToolbar:!0,variant:"inline",format:"yyyy/MM/dd",margin:"normal",label:"Ending date",value:P,onChange:function(e){return L(e)},KeyboardButtonProps:{"aria-label":"change date"}})]}),Object(a.jsx)(he.a,{value:M,onChange:function(e){return U(e.target.value)},label:"Image"}),Object(a.jsxs)(ue.a,{children:[Object(a.jsx)(S.a,{onClick:Object(_.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(d,t.id,n,v,p,N,P,y,M).then((function(e){if(!e.error)return c(o+1);alert(e.message)}));case 2:case"end":return e.stop()}}),e)}))),disabled:!(M&&p&&v&&y&&N&&P),color:"primary",variant:"contained",children:"EDIT VACATION"}),Object(a.jsx)(S.a,{onClick:u,variant:"contained",color:"secondary",children:"CANCEL"})]})]})})]})})},me=Object(M.a)((function(e){return{root:{maxWidth:345},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Y.a[500]}}})),ye=function(e){var t=e.vacation,n=e.update,o=e.setUpdate,c=e.likes,i=Object(l.c)((function(e){return e.user})),u=i.id,d=i.role,j=i.token;console.log(t.Followed_by);var b=me(),p=Object(r.useState)(!1),h=Object(s.a)(p,2),O=h[0],f=h[1],v=Object(r.useState)(!1),x=Object(s.a)(v,2),g=x[0],m=x[1],y=Object(r.useState)(!1),w=Object(s.a)(y,2),k=w[0],S=w[1];return Object(a.jsx)("div",{className:"vacation",children:Object(a.jsxs)(B.a,{className:b.root,children:[Object(a.jsx)(F.a,{title:t.location}),Object(a.jsx)(z.a,{className:b.media,image:t.image,title:"Paella dish"}),Object(a.jsx)(W.a,{children:Object(a.jsxs)(H.a,{variant:"body2",color:"textSecondary",component:"h6",children:["Vacation in ",t.location," ",Object(a.jsx)("br",{}),"Starting at: ",Object(a.jsx)("br",{})," ",t.starting_date.slice(0,10)," ",Object(a.jsx)("br",{}),"Ending at: ",Object(a.jsx)("br",{})," ",t.ending_date.slice(0,10)," ",Object(a.jsx)("br",{}),"Price: ",t.price," \u20aa"]})}),Object(a.jsxs)(K.a,{disableSpacing:!0,children:["user"===d&&Object(a.jsxs)(X.a,{onClick:Object(_.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(u,t.id);case 2:o(n+1);case 3:case"end":return e.stop()}}),e)}))),children:[(null===c||void 0===c?void 0:c.likes)||0,"  ",Object(a.jsx)(Q.a,{color:t.Followed_by?"secondary":""})]}),"admin"===d&&Object(a.jsxs)(a.Fragment,{children:[(null===t||void 0===t?void 0:t.followers)||0," ",Object(a.jsx)(Q.a,{color:"secondary"}),Object(a.jsx)(X.a,{onClick:function(){S(!0)},children:Object(a.jsx)(ne.a,{color:"primary"})}),Object(a.jsx)(ge,{update:n,setUpdate:o,open:k,token:j,vacation:t,handleClose:function(){S(!1)}}),Object(a.jsx)(X.a,{onClick:function(){m(!0)},children:Object(a.jsx)(R.a,{color:"error"})}),Object(a.jsx)(se,{update:n,setUpdate:o,token:j,vacation:t,open:g,handleClose:function(){m(!1)}})]}),Object(a.jsx)(X.a,{className:Object(G.a)(b.expand,Object(D.a)({},b.expandOpen,O)),onClick:function(){f(!O)},"aria-expanded":O,"aria-label":"show more",children:Object(a.jsx)($.a,{})})]}),Object(a.jsx)(J.a,{in:O,timeout:"auto",unmountOnExit:!0,children:Object(a.jsx)(W.a,{children:Object(a.jsx)(H.a,{paragraph:!0,children:t.description})})})]})})},we=function(){var e=Object(l.b)(),t=Object(u.g)(),n=Object(l.c)((function(e){return e.userVacations})),o=n.followedVacations,c=n.unfollowedVacations,i=n.likes,d=Object(l.c)((function(e){return e.adminVacations})).vacations,j=Object(l.c)((function(e){return e.user})),b=j.id,p=j.role,h=j.token,O=Object(r.useState)(0),f=Object(s.a)(O,2),v=f[0],x=f[1];return Object(r.useEffect)((function(){if(!localStorage.getItem("token"))return t.push("/login");"user"===p?A(b,e,h):"admin"===p&&L(e,h)}),[v]),Object(a.jsxs)("div",{children:["user"===p&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{className:"follow-title",children:"Followed Vacations"}),Object(a.jsxs)(pe.a,{display:"flex",flexWrap:"wrap",children:[(null===o||void 0===o?void 0:o.length)?o.map((function(e){return Object(a.jsx)(ye,{update:v,likes:i.find((function(t){return t.vacation_id===e.id})),setUpdate:x,vacation:e},e.id)})):Object(a.jsx)("h3",{children:"No vacations to display."}),Object(a.jsx)("hr",{})]}),Object(a.jsx)("h1",{className:"follow-title vacations-title",children:"Unfollowed vacations"}),Object(a.jsx)(pe.a,{display:"flex",flexWrap:"wrap",children:(null===c||void 0===c?void 0:c.length)?c.map((function(e){return Object(a.jsx)(ye,{update:v,likes:i.find((function(t){return t.vacation_id===e.id})),setUpdate:x,vacation:e},e.id)})):Object(a.jsx)("h3",{children:"No vacations to display."})})]}),"admin"===p&&Object(a.jsx)(pe.a,{display:"flex",flexWrap:"wrap",children:(null===d||void 0===d?void 0:d.length)?d.map((function(e){return Object(a.jsx)(ye,{update:v,setUpdate:x,vacation:e},e.id)})):Object(a.jsx)("h1",{children:"No vacations to display"})})]})},ke=n(52),Se=function(){var e=Object(l.c)((function(e){return e.adminVacations})).vacations,t=Object(u.g)(),n=Object(l.c)((function(e){return e.user})),o=n.token,c=n.role,i=Object(l.b)(),s=[];return Object(r.useEffect)((function(){localStorage.getItem("token")&&"admin"===c?(null===e||void 0===e?void 0:e.length)||L(i,o):t.push("/login")}),[]),null===e||void 0===e||e.forEach((function(e){e.followers&&s.push({name:e.location,followers:e.followers})})),console.log(e),(null===s||void 0===s?void 0:s.length)?Object(a.jsx)("div",{className:"graph",children:Object(a.jsx)(ke.e,{width:"100%",height:400,children:Object(a.jsxs)(ke.b,{margin:{top:5,right:30,left:20,bottom:5},data:s,children:[Object(a.jsx)(ke.g,{allowDecimals:"false",dataKey:"name",stroke:"#8884d8",label:{offset:-25,position:"insideBottom",value:"Locations"}}),Object(a.jsx)(ke.h,{allowDecimals:"false",dataKey:"followers",label:{offset:-10,angle:-90,position:"insideLeft",value:"Followers"}}),Object(a.jsx)(ke.f,{wrapperStyle:{width:100,backgroundColor:"#ccc"}}),Object(a.jsx)(ke.d,{width:100,wrapperStyle:{top:40,right:20,backgroundColor:"#f5f5f5",border:"1px solid #d5d5d5",borderRadius:3,lineHeight:"80px"}}),Object(a.jsx)(ke.c,{stroke:"#ccc",strokeDasharray:"5 5"}),Object(a.jsx)(ke.a,{name:"followers",dataKey:"followers",fill:"#6664d8",barSize:30})]})})}):Object(a.jsx)("h1",{children:"No vacations followed yet."})},Ce=n(232),Ee=n.n(Ce),_e=function(){var e=Object(_.a)(E.a.mark((function e(t,n,a,r,o,c,i,s){var l,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations/new",{method:"POST",headers:{"content-type":"application/json",authorization:s},body:JSON.stringify({description:n,location:t,startingDate:a,endingDate:r,image:c,price:o})});case 2:return l=e.sent,e.next=5,l.json();case 5:u=e.sent,i({type:f,payload:u});case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r,o,c,i,s){return e.apply(this,arguments)}}(),Ne=Object(M.a)((function(e){return{paper:{backgroundColor:"white",width:"100%"},root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(1),width:e.spacing(16),height:e.spacing(16)}}}})),Te=function(){var e,t,n=Object(u.g)(),o=Object(l.b)(),c=Object(l.c)((function(e){return e.user})).role,i=Object(l.c)((function(e){return e.user})).token,d=Object(r.useState)(""),j=Object(s.a)(d,2),b=j[0],p=j[1],h=Object(r.useState)(""),O=Object(s.a)(h,2),f=O[0],x=O[1],g=Object(r.useState)(""),m=Object(s.a)(g,2),y=m[0],w=m[1],C=Object(r.useState)(new Date),E=Object(s.a)(C,2),_=E[0],N=E[1],I=Object(r.useState)(new Date),P=Object(s.a)(I,2),L=P[0],A=P[1],M=Object(r.useState)(""),U=Object(s.a)(M,2),R=U[0],G=U[1],B=Object(l.c)((function(e){return e.postVacation})),F=Ne();return Object(r.useEffect)((function(){if("admin"!==c||!i)return n.push("/");o({type:v,payload:null})}),[]),Object(a.jsxs)("div",(t={className:F.paper},Object(D.a)(t,"className","add-vacation-form"),Object(D.a)(t,"children",[Object(a.jsx)(k.a,{value:b,onChange:function(e){return p(e.target.value)},inputProps:{"aria-label":"description",placeholder:"Locatoin.."}}),Object(a.jsx)(Oe.a,{value:f,onChange:function(e){return x(e.target.value)},"aria-label":"minimum height",rowsMin:3,placeholder:"Vacation description.."}),Object(a.jsx)(k.a,{value:y,onChange:function(e){return w(e.target.value)},inputProps:{type:"number","aria-label":"price",placeholder:"Price.."}}),Object(a.jsxs)(fe.a,{utils:be.a,children:[Object(a.jsx)(ve.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",label:"Starting date",value:_,onChange:function(e){return N(e)},KeyboardButtonProps:{"aria-label":"change date"}}),Object(a.jsx)(ve.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",label:"Ending date",value:L,onChange:function(e){return A(e)},KeyboardButtonProps:{"aria-label":"change date"}})]}),Object(a.jsx)(k.a,{value:R,onChange:function(e){return G(e.target.value)},inputProps:{"aria-label":"image",placeholder:"Image.."}}),Object(a.jsx)(S.a,{onClick:function(){return _e(b,f,_,L,y,R,o,i)},variant:"contained",color:"default",startIcon:Object(a.jsx)(Ee.a,{}),children:"Submit new vacation"}),(null===B||void 0===B||null===(e=B.message)||void 0===e?void 0:e.length)&&Object(a.jsxs)(T.a,{severity:(null===B||void 0===B?void 0:B.error)?"error":"success",children:[Object(a.jsx)(V.a,{children:(null===B||void 0===B?void 0:B.error)?"Error":"Success"}),null===B||void 0===B?void 0:B.message]})]),t))},Ve=function(){var e=Object(_.a)(E.a.mark((function e(t,n){var a,r,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=localStorage.getItem("token"))){e.next=11;break}return e.next=4,fetch("http://localhost:1000/login/refresh",{method:"POST",headers:{"Content-Type":"application/json",authorization:a}});case 4:return r=e.sent,e.next=7,r.json();case 7:o=e.sent,console.log("res",o),t({type:"LOG_IN",payload:{user:o.data[0],token:a}}),n.push("/vacations");case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ie=n(233),Pe=n(528),Le=function(){var e,t=Object(l.c)((function(e){return e.user})),n=Object(l.c)((function(e){return e.user})).token,c=Object(l.b)(),i=Object(u.g)(),j=o.a.useState(null),p=Object(s.a)(j,2),h=p[0],O=p[1],f=function(){O(null)};return Object(r.useEffect)((function(){t.length||Ve(c,i),"user"===(null===t||void 0===t?void 0:t.role)?A(t.id,c,n):"admin"===(null===t||void 0===t?void 0:t.role)&&L(c,n)}),[]),Object(a.jsxs)(d.a,{children:[Object(a.jsxs)("div",{children:[(null===t||void 0===t?void 0:t.token)&&Object(a.jsxs)("h1",{children:["Welcome, ",t.first_name]}),Object(a.jsx)(S.a,{variant:"contained",color:"primary","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){O(e.currentTarget)},children:"Menu"}),Object(a.jsxs)(Ie.a,{id:"simple-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:f,children:[(null===t||void 0===t?void 0:t.token)&&Object(a.jsx)(Pe.a,{onClick:function(){u.a,f()},children:Object(a.jsx)(d.b,{to:"/vacations",children:"Home"})}),"admin"===(null===t||void 0===t?void 0:t.role)&&Object(a.jsx)(Pe.a,{onClick:function(e){return f()},children:Object(a.jsx)(d.b,{to:"/admin/addvacation",children:"Add Vacation"})}),"admin"===(null===t||void 0===t?void 0:t.role)&&Object(a.jsx)(Pe.a,{onClick:function(e){return f()},children:Object(a.jsx)(d.b,{to:"/admin/chart",children:"Followers Chart"})}),!(null===t||void 0===t?void 0:t.token)&&Object(a.jsxs)(Pe.a,{onClick:function(e){return f()},children:[" ",Object(a.jsx)(d.b,{to:"/login",children:"Login"})]}),!(null===t||void 0===t?void 0:t.token)&&Object(a.jsxs)(Pe.a,{onClick:function(e){return f()},children:[" ",Object(a.jsx)(d.b,{to:"/register",children:"Register"})]}),(null===t||void 0===t||null===(e=t.token)||void 0===e?void 0:e.length)&&Object(a.jsxs)(Pe.a,{onClick:function(e){f(),localStorage.clear(),c({type:b,payload:{}},{type:g,payload:[]}),i.push("/login")},children:[" ",Object(a.jsx)(d.b,{to:"/login",children:"Logout"})]})]})]}),Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{exact:!0,path:"/login",component:function(){return Object(a.jsx)(I,{})}}),Object(a.jsx)(u.b,{exact:!0,path:"/register",component:function(){return Object(a.jsx)(P,{})}}),Object(a.jsx)(u.b,{exact:!0,path:"/vacations",component:function(){return Object(a.jsx)(we,{})}}),Object(a.jsx)(u.b,{exact:!0,path:"/admin/addvacation",component:function(){return Object(a.jsx)(Te,{})}}),Object(a.jsx)(u.b,{exact:!0,path:"/admin/chart",component:function(){return Object(a.jsx)(Se,{})}}),Object(a.jsx)(u.a,{from:"/",to:"/vacations",exact:!0})]})]})},Ae=n(51),De=[],Me=[],Ue={},Re=n(94),Ge=Object(Re.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:var n=t.payload.user,a=n.first_name,r=n.last_name,o=n.username,c=n.role,i=n.id,s=t.payload.token;return Object(Ae.a)(Object(Ae.a)({},e),{},{first_name:a,last_name:r,username:o,role:c,id:i,token:s});case b:return e=t.payload;default:return e}},adminVacations:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case O:var t=e.payload.vacations;return Object(Ae.a)(Object(Ae.a)({},De),{},{vacations:t});default:return De}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:case w:return e=t.payload;default:return e}},userVacations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:var n=t.payload,a=n.followedVacations,r=n.unfollowedVacations,o=n.likes;return Object(Ae.a)(Object(Ae.a)({},Me),{},{followedVacations:a,unfollowedVacations:r,likes:o});case g:return Me;default:return e}},editVacationReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return e=t.payload;default:return e}},postVacation:function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f:return e.payload;case v:return Ue=e.payload;default:return Ue}},loginMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:case h:return e=t.payload;default:return e}}}),Be=Object(Re.c)(Ge,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(Object(a.jsx)(l.a,{store:Be,children:Object(a.jsx)(d.a,{children:Object(a.jsx)(Le,{})})}),document.getElementById("root"))}},[[468,1,2]]]);
//# sourceMappingURL=main.f0fd3abd.chunk.js.map